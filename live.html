<!DOCTYPE html>
<html>
  <head>
    <title>Live Streams</title>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <link rel="stylesheet" href="live.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üì°</text></svg>">
  </head>

  <body>
    <div class="container">
      <div class="player-column">
        <audio id="audioPlayer"></audio>
        <div id="audioControls">
          <button id="playPauseBtn" class="control-btn" title="Play/Pause (Space)">‚ñ∂</button>
          <span id="timeDisplay">PAUSED</span>
          <div id="nowPlaying"></div>
          <div id="volumeControl">
            <button id="muteBtn" class="control-btn" title="Mute">üîä</button>
            <input type="range" id="volumeSlider" min="0" max="100" value="50" title="Volume">
          </div>
        </div>
      </div>
      <div class="streams-column">
         <div id="mixBrowser">
          <div id="mixList"></div>
          <div style="display: flex; gap: 10px; margin-top: 10px; flex-shrink: 0;">
              <button id="findPlaylistsBtn" onclick="showPlaylistGuide(event)" style="flex: 1; padding: 12px 16px; font-size: 14px; font-weight: bold;">Find Playlists...</button>
              <button id="addPlaylistsBtn" onclick="showPresetsMenu(event)" style="flex: 1; padding: 12px 16px; font-size: 14px; font-weight: bold;">Add Playlists...</button>
            </div>
          
         </div>
         </div>
         <footer id="httpsNotice" style="text-align: center; padding: 12px 15px; color: #fff; font-size: 13px; font-weight: bold; background-color: #c0475c; grid-column: 1 / -1; display: none;">
         ‚ö†Ô∏è Some audio streams may not work on HTTPS. Use the <a href="http://mixes.4st.uk/live.html" style="color: #fff; text-decoration: underline;">HTTP version</a> for full compatibility.
         </footer>
         <script>
           if (location.protocol === 'https:') {
             document.getElementById('httpsNotice').style.display = '';
           }
         </script>
         </div>

         <div id="playlistGuideModal" class="modal" onclick="hidePlaylistGuide()" style="display: none;">
      <div class="modal-content slide-up" onclick="event.stopPropagation()">
        <button class="modal-close" onclick="hidePlaylistGuide()">√ó</button>
        <h2>Find Stream Playlists</h2>
        <div class="playlist-guide">
          <div class="guide-section">
            <h3>SomaFM</h3>
            <p><a href="https://somafm.com/listen/" target="_blank" onclick="hidePlaylistGuide()">somafm.com/listen/</a></p>
            <ol>
              <li>Click on a station you like</li>
              <li>Right-click on the <strong>AAC 128K</strong> link</li>
              <li>Select "Copy link" or "Copy link address"</li>
              <li>Paste into the Playlist URL box above</li>
            </ol>
          </div>
          <div class="guide-section">
            <h3>Shoutcast</h3>
            <p><a href="http://directory.shoutcast.com/" target="_blank" onclick="hidePlaylistGuide()">directory.shoutcast.com</a></p>
            <ol>
              <li>Browse or search for a station or genre</li>
              <li>Click the <strong>download icon</strong> next to the station</li>
              <li>Right-click on <strong>Winamp (.pls)</strong></li>
              <li>Select "Copy link" or "Copy link address"</li>
              <li>Paste into the Playlist URL box above</li>
            </ol>
          </div>
          <div class="guide-section">
            <h3>Finding Streams Online</h3>
            <ul>
              <li>Search <strong>"[station name] m3u"</strong> or <strong>"[station name] playlist"</strong> in Google</li>
              <li>Look for links ending in <code>.m3u</code> or <code>.pls</code></li>
              <li>These are playlist files that work with our player</li>
              <li>If you find a direct stream URL (http/https), paste it in the box above</li>
              <li>Many streaming sites use walled gardens - look for independent radio directories</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div id="presetsModal" class="modal" onclick="hidePresetsMenu()" style="display: none;">
      <div class="modal-content" onclick="event.stopPropagation()" style="background: #252542; border-radius: 10px; padding: 16px; max-width: 300px;">
        <h2 style="margin-top: 0; margin-bottom: 16px; font-size: 16px;">Add Playlists</h2>
        <div id="presetsList" style="display: flex; flex-direction: column; gap: 8px;"></div>
      </div>
    </div>

    <div id="confirmDialog" class="modal" style="display: none;">
      <div class="confirm-content modal-content" onclick="event.stopPropagation()" style="background: #252542; border-radius: 10px; padding: 24px; max-width: 320px;">
        <h2 class="confirm-title" style="margin-top: 0; margin-bottom: 12px; font-size: 16px;"></h2>
        <p class="confirm-message" style="margin: 0 0 20px 0; color: #ccc; font-size: 14px;"></p>
        <div style="display: flex; gap: 10px; justify-content: flex-end;">
          <button class="confirm-cancel" style="padding: 10px 16px; background: #3d3d5c; border: none; border-radius: 6px; color: #e0e0e0; cursor: pointer; transition: background 0.2s; font-size: 14px;">Cancel</button>
          <button class="confirm-confirm" style="padding: 10px 16px; background: #c0475c; border: none; border-radius: 6px; color: #fff; cursor: pointer; transition: background 0.2s; font-size: 14px; font-weight: bold;">Delete</button>
        </div>
      </div>
    </div>

    <script src="core.js"></script>
    <script src="player.js"></script>
    <script src="livedata.js"></script>
    <script src="modals.js"></script>
    <script src="liveui.js"></script>
    <script>
      // live.html restoration - restore live stream if available
      (async function restoreLiveApp() {
        const restored = await restoreLivePlayer();
        if (!restored) {
          // No live stream to restore, initialize display
          displayLiveStreams();
        }
      })();
    </script>
  </body>

</html>
